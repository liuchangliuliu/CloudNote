<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>修改密码</title>
    <link rel="stylesheet" href="bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <script src="jquery/jquery-1.11.3.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script src="bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <style>
        @media  screen and (min-width: 200px) {
            .box1 {
                /*border:1px solid red;*/
                height: 120px;
                width: 600px;
            }

        }
        .box1{
            margin-top: 150px;
            margin-left:300px;
            margin-right: 500px;
            /*font-family: "微软雅黑 Light";*/
        }
        #btn{
            color: white;
            background: lightskyblue;
            font-size: 18px;
            float: left;
            margin-top: 30px;
            margin-left: 300px;
        }

    </style>
</head>
<body style="padding: 50px;">
<nav class="navbar navbar-inverse navbar-fixed-top" style="height: 50px;">

    <div class="container-fluid">
        <!--无道云的图标-->
        <div class="navbar-header">
            <a class="navbar-brand" href="#">
                <img alt="Brand" src="...">
            </a>
        </div>

        <!--设置-->
        <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
                <a style="background: none" href="#" class="dropdown-toggle" data-toggle="dropdown" >
                    设置 <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
                    <li id="msg" ><a href="#">个人信息</a></li>
                    <li class="divider"></li>
                    <li id="account"><a href="#">账户设置</a></li>
                    <li class="divider"></li>
                    <li id="share" ><a href="#">查看分享</a></li>
                    <li class="divider"></li>
                    <li id="help" ><a href="#">帮助</a></li>


                </ul>
            </li>
        </ul>
        <!--头像-->
        <div class=" navbar-right" style="margin-right: 30px;">
            <img src="cinqueterre.jpg" class="img-responsive" alt="Cinque Terre">
        </div>
        <!--搜索-->
        <div>
            <form class="navbar-form navbar-left" role="search">
                <div class="form-group">
                    <input type="text" class="form-control" style="border:none; background:none;outline:none;" placeholder="Search" />
                </div>
                <button type="submit" class="btn btn-default">查找</button>
            </form>
            </button>
        </div>
    </div>
    <div>
        <ul class="nav nav-tabs ">
            <li style="margin-left: 450px;"><a href="#">账号信息</a></li>
            <li><a href="accountsafe.html">账号安全</a></li>
            <li><a href="#">上传文件</a></li>
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                    下载文件 <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="#">本地下载</a></li>
                    <li><a href="#">高速下载</a></li>
                    <li class="divider"></li>
                    <li><a href="#">链接</a></li>
                </ul>
            </li>
            <li><a href="#">更改密码</a></li>
        </ul>
    </div>
</nav>
<div class="box1" >
    <h4 style="margin-left: 40px"> 修改笔记登录密码</h4>
    <hr>
    <form method="" action="" onsubmit="return httpPost()">
        <div class="form-group" style="width: 250px;height: 50px;margin: 0 auto;margin-top: 20px">
            请输入原始密码:<input  id="password" class="form-control" type="text" name="tel" maxlength="11"  placeholder="" >
        </div>
        <div class="form-group" style="width: 250px;height: 50px;margin: 0 auto;margin-top: 20px">
            设置新的密码:<input id="newpassword" class="form-control" type="password" name="password" placeholder="">
        </div>
        <div class="form-group" style="width: 250px;height: 50px;margin: 0 auto;margin-top: 20px">
            重复新的密码:<input id="repeatpassword" class="form-control" type="password" name="password" placeholder="">
        </div>
        <button id="btn" type="submit"  class="btn btn-default" >确定</button>
    </form>
    <script>
        function httpPost() {
            var flag = true;
            var password = $("#password").val();
            var newpassword = $("#newpassword").val();
            var repeatpassword = $("#repeatpassword").val
            var re=/^1\d{10}$/; //与原始密码是否相匹配
            if (!re.test(password)) {
                toastr.error("密码输入不正确");
                return false;
            }
            if (newpassword == "" || newpassword == null) {
                toastr.error("新密码不能为空");
                return false;
            }
            if (newpassword != repeatpassword) {
                toastr.error("两次密码不一致！");
                return false;
            }
            $.ajax({
                type: 'post',
                url: '/loginCheck',
                async :'false',
                dataType:'json',
                data: {
                    'password': password,
                    'newpassword':newpassword,
                    'repeatpassword':repeatpassword
                },
                success: function (msg) {
                    if (msg.res == false){
                        toastr("输入密码与原始密码不匹配");
                        flag = false;
                    }
                    flag = true;
                },
                error: function (error) {
                    toastr("设置失败！");
                    flag = false;
                }
            });
            return flag;
        }
        </script>
</div>

</body>
</html>